<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Dashboard</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap"
    />
    <link rel="stylesheet" href="css/tailwind/tailwind.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"
      defer
    ></script>

    <!-- Favicon -->
    <link href="favicon.ico" rel="icon" />
  </head>
  <body class="antialiased bg-body text-body font-body">
    <div>
      <div x-data="prohibitedItemsApp()">
        <!-- Sidebar and Navbar Code (Unchanged) -->

        <!-- Main Content -->
        <div class="mx-auto lg:ml-80">
          <!-- Dashboard Prohibited Items -->
          <section class="py-8">
            <div class="container px-4 mx-auto">
              <div class="py-4 bg-white rounded">
                <div
                  class="flex flex-wrap px-6 pb-4 border-b justify-between items-center"
                >
                  <!-- Header for English and Indonesian -->
                  <div class="flex-grow">
                    <h3 x-show="tab === 'EN'" class="text-xl font-bold">
                      Prohibited Items (English)
                    </h3>
                    <h3 x-show="tab === 'ID'" class="text-xl font-bold">
                      Barang Terlarang (Indonesian)
                    </h3>
                  </div>

                  <!-- Buttons for adding items -->
                  <div class="flex space-x-4">
                    <button
                      @click="showAddForm = true"
                      class="py-2 px-3 bg-indigo-500 text-white text-sm font-medium rounded-md"
                    >
                      <span x-show="tab === 'EN'">Add Item</span>
                      <span x-show="tab === 'ID'">Tambah Barang</span>
                    </button>
                  </div>

                  <!-- Tab buttons -->
                  <div class="ml-auto flex space-x-2">
                    <button
                      @click="toggleTab('EN')"
                      :class="{'bg-indigo-500 text-white': tab === 'EN'}"
                      class="py-2 px-3 text-xs font-medium rounded-md"
                    >
                      EN
                    </button>
                    <button
                      @click="toggleTab('ID')"
                      :class="{'bg-indigo-500 text-white': tab === 'ID'}"
                      class="py-2 px-3 text-xs font-medium rounded-md"
                    >
                      ID
                    </button>
                  </div>
                </div>

                <!-- Display Data -->
                <main class="pt-4 px-4 overflow-x-auto">
                  <!-- Content area based on tab -->
                  <div x-show="tab === 'EN'">
                    <ul>
                      <template x-for="item in enItems" :key="item.id_item">
                        <li class="mb-2">
                          Destination:
                          <strong x-text="item.Destination"></strong> -
                          Prohibited:
                          <strong x-text="item['Prohibited Items']"></strong> -
                          Max Weight:
                          <strong x-text="item['Max Weight']"></strong> kg
                        </li>
                      </template>
                    </ul>
                  </div>
                  <div x-show="tab === 'ID'">
                    <ul>
                      <template x-for="item in idItems" :key="item.id_item">
                        <li class="mb-2">
                          Destinasi: <strong x-text="item.Destinasi"></strong> -
                          Barang Terlarang:
                          <strong x-text="item['Barang Terlarang']"></strong> -
                          Berat Maksimum:
                          <strong x-text="item['Berat Maksimum']"></strong> kg
                        </li>
                      </template>
                    </ul>
                  </div>
                </main>
              </div>
            </div>
          </section>

          <!-- Add Item Form -->
          <div x-show="showAddForm" class="bg-white p-4 rounded shadow mt-6">
            <h3
              class="text-lg font-bold"
              x-text="tab === 'EN' ? 'Add Prohibited Item' : 'Tambah Barang Terlarang'"
            ></h3>
            <div class="mb-4">
              <label class="block">Destination:</label>
              <input
                type="text"
                class="border p-2 w-full"
                x-model="newItem.Destination"
              />
            </div>
            <div class="mb-4">
              <label
                class="block"
                x-text="tab === 'EN' ? 'Prohibited Item:' : 'Barang Terlarang:'"
              ></label>
              <input
                type="text"
                class="border p-2 w-full"
                x-model="newItem.Prohibited"
              />
            </div>
            <div class="mb-4">
              <label
                class="block"
                x-text="tab === 'EN' ? 'Max Weight (kg):' : 'Berat Maksimum (kg):'"
              ></label>
              <input
                type="number"
                class="border p-2 w-full"
                x-model="newItem.Weight"
                step="0.01"
              />
            </div>
            <button
              @click="addItem()"
              class="bg-green-500 text-white py-2 px-4 rounded"
            >
              Save
            </button>
            <button
              @click="showAddForm = false"
              class="bg-red-500 text-white py-2 px-4 rounded ml-2"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      function prohibitedItemsApp() {
        return {
          tab: "EN", // Default to English tab
          showAddForm: false, // Control for add item form
          newItem: { Destination: "", Prohibited: "", Weight: "" },
          enItems: [], // English Items
          idItems: [], // Indonesian Items

          // Function to load JSON data (replace with actual fetch calls in production)
          loadJSONData() {
            // Replace the paths with the correct file paths
            fetch("webhook.prohibited_items_en.json")
              .then((response) => {
                if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
              })
              .then((data) => {
                this.enItems = data;
              })
              .catch((error) => {
                console.error("Error fetching English items:", error);
              });

            fetch("webhook.prohibited_items_id.json")
              .then((response) => {
                if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
              })
              .then((data) => {
                this.idItems = data;
              })
              .catch((error) => {
                console.error("Error fetching Indonesian items:", error);
              });
          },

          toggleTab(language) {
            this.tab = language;
          },

          addItem() {
            if (this.tab === "EN") {
              this.enItems.push({
                id_item: Date.now().toString(),
                Destination: this.newItem.Destination,
                "Prohibited Items": this.newItem.Prohibited,
                "Max Weight": this.newItem.Weight,
              });
            } else {
              this.idItems.push({
                id_item: Date.now().toString(),
                Destinasi: this.newItem.Destination,
                "Barang Terlarang": this.newItem.Prohibited,
                "Berat Maksimum": this.newItem.Weight,
              });
            }
            // Clear input fields after adding
            this.newItem = { Destination: "", Prohibited: "", Weight: "" };
            this.showAddForm = false;
          },

          init() {
            this.loadJSONData(); // Load the initial data
          },
        };
      }

      document.addEventListener("alpine:init", () => {
        prohibitedItemsApp().init();
      });
    </script>
  </body>
</html>
